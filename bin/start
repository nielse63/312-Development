#!/usr/bin/env bash
set -e

if ! [ $(command -v http-server) ]; then
  npm i -g http-server
fi

function start_non_production
{
  http-server -p 3000 \
    --proxy $API_HOST \
    --gzip \
    --no-dotfiles \
    dist/
}

function start_production
{
  http-server -p $PORT \
    --proxy $API_HOST \
    --gzip \
    --no-dotfiles \
    dist/
}

if [ "$1" == "--prod" ]; then
  start_production
else
  start_non_production
fi
