var __wpo = {"assets":{"main":["/dist/../fonts/Brandon_bld.ttf?246442f44d26fb1f7a3498aff1cdfca8","/dist/../fonts/Brandon_bld.woff?1d13843717e729e547c34c70989e6375","/dist/../fonts/Brandon_reg.ttf?fdecab1b67d301653660f94fe150efca","/dist/../fonts/Brandon_reg.woff?e65ae2aaad4adb11be846f7213914833","/dist/../fonts/CrimsonText-Roman.woff?2466622982fd2320035156f71cf614d8","/dist/../fonts/CrimsonText-Roman.woff2?a4606a0e4182a72f602171c6759259a5","/dist/../fonts/ProximaNova.woff?03b2a5ecf27db587588625c92d9de92e","/dist/../fonts/ProximaNova.woff2?263ee7dcbdbd37186612c6ba59b3fcfb","/dist/../fonts/ProximaNovaBold.woff?d06f11e7c1aa87d723fc0a0757161928","/dist/../fonts/ProximaNovaBold.woff2?6e11151b09fb25e9cf6637b4f9c07191","/dist/../fonts/ProximaNovaBoldItalic.woff?f2e234f727babe0492b9b9866f340987","/dist/../fonts/ProximaNovaBoldItalic.woff2?968fa8834914ee45fa5d5987e8f68151","/dist/../fonts/ProximaNovaItalic.woff?7aa1bac245edae529b27b6e5400ca860","/dist/../fonts/ProximaNovaItalic.woff2?a2c24e3b44c2ae490ec20493cf333095","/dist/../fonts/ProximaNovaLight.woff?6ab1d34acee05851c10f56797d1c398f","/dist/../fonts/ProximaNovaLight.woff2?f1a16d5c4acdbf378356693ff59f6e63","/dist/../fonts/ProximaNovaLightIt.woff?eb7ddf03893e22bfa0b655f740a0fe5c","/dist/../fonts/ProximaNovaLightIt.woff2?b88fd6c563919b70bcb0847c88965cf3","/dist/../images/404.jpg?2ba377079c3c50ee274f22310e9b6942","/dist/../images/about.jpg?9edcadc4f2f4e259277ec2d16ab98d39","/dist/../images/contact.jpg?946095ef8f3fae4b6c3d10b839e64a01","/dist/app.js?b4a5bf19de2f0214ea58","/dist/scss.js?b4a5bf19de2f0214ea58"],"additional":[],"optional":[]},"hashesMap":{"246442f44d26fb1f7a3498aff1cdfca8":"/dist/../fonts/Brandon_bld.ttf?246442f44d26fb1f7a3498aff1cdfca8","1d13843717e729e547c34c70989e6375":"/dist/../fonts/Brandon_bld.woff?1d13843717e729e547c34c70989e6375","fdecab1b67d301653660f94fe150efca":"/dist/../fonts/Brandon_reg.ttf?fdecab1b67d301653660f94fe150efca","e65ae2aaad4adb11be846f7213914833":"/dist/../fonts/Brandon_reg.woff?e65ae2aaad4adb11be846f7213914833","2466622982fd2320035156f71cf614d8":"/dist/../fonts/CrimsonText-Roman.woff?2466622982fd2320035156f71cf614d8","a4606a0e4182a72f602171c6759259a5":"/dist/../fonts/CrimsonText-Roman.woff2?a4606a0e4182a72f602171c6759259a5","03b2a5ecf27db587588625c92d9de92e":"/dist/../fonts/ProximaNova.woff?03b2a5ecf27db587588625c92d9de92e","263ee7dcbdbd37186612c6ba59b3fcfb":"/dist/../fonts/ProximaNova.woff2?263ee7dcbdbd37186612c6ba59b3fcfb","d06f11e7c1aa87d723fc0a0757161928":"/dist/../fonts/ProximaNovaBold.woff?d06f11e7c1aa87d723fc0a0757161928","6e11151b09fb25e9cf6637b4f9c07191":"/dist/../fonts/ProximaNovaBold.woff2?6e11151b09fb25e9cf6637b4f9c07191","f2e234f727babe0492b9b9866f340987":"/dist/../fonts/ProximaNovaBoldItalic.woff?f2e234f727babe0492b9b9866f340987","968fa8834914ee45fa5d5987e8f68151":"/dist/../fonts/ProximaNovaBoldItalic.woff2?968fa8834914ee45fa5d5987e8f68151","7aa1bac245edae529b27b6e5400ca860":"/dist/../fonts/ProximaNovaItalic.woff?7aa1bac245edae529b27b6e5400ca860","a2c24e3b44c2ae490ec20493cf333095":"/dist/../fonts/ProximaNovaItalic.woff2?a2c24e3b44c2ae490ec20493cf333095","6ab1d34acee05851c10f56797d1c398f":"/dist/../fonts/ProximaNovaLight.woff?6ab1d34acee05851c10f56797d1c398f","f1a16d5c4acdbf378356693ff59f6e63":"/dist/../fonts/ProximaNovaLight.woff2?f1a16d5c4acdbf378356693ff59f6e63","eb7ddf03893e22bfa0b655f740a0fe5c":"/dist/../fonts/ProximaNovaLightIt.woff?eb7ddf03893e22bfa0b655f740a0fe5c","b88fd6c563919b70bcb0847c88965cf3":"/dist/../fonts/ProximaNovaLightIt.woff2?b88fd6c563919b70bcb0847c88965cf3","2ba377079c3c50ee274f22310e9b6942":"/dist/../images/404.jpg?2ba377079c3c50ee274f22310e9b6942","9edcadc4f2f4e259277ec2d16ab98d39":"/dist/../images/about.jpg?9edcadc4f2f4e259277ec2d16ab98d39","eb12b2a0a43fd4feb0f0e5b9fc4cd439":"/dist/../images/contact.jpg?946095ef8f3fae4b6c3d10b839e64a01","d124901ad2e9a47ebf41001dbc85f5c5":"/dist/app.js?b4a5bf19de2f0214ea58","faa359f48fedc6a110d0e3ed8f35300a":"/dist/scss.js?b4a5bf19de2f0214ea58"},"strategy":"all","version":"7/29/2016, 11:33:43 AM","name":"webpack-offline","relativePaths":false};

!function(n){function g(I){if(c[I])return c[I].exports;var e=c[I]={exports:{},id:I,loaded:!1};return n[I].call(e.exports,e,e.exports,g),e.loaded=!0,e.exports}var c={};return g.m=n,g.c=c,g.p="/dist/",g(0)}([function(module,exports,__webpack_require__){eval("\n      'use strict';\n\nif (false) {\n  var DEBUG = false;\n}\n\nfunction WebpackServiceWorker(params) {\n  var strategy = params.strategy;\n  var assets = params.assets;\n  var hashesMap = params.hashesMap;\n\n  // Not used yet\n  // const alwaysRevalidate = params.alwaysRevalidate;\n  // const ignoreSearch = params.ignoreSearch;\n  // const preferOnline = params.preferOnline;\n\n  var tagMap = {\n    all: params.version,\n    changed: params.version\n  };\n\n  var CACHE_PREFIX = params.name;\n  var CACHE_TAG = tagMap[strategy];\n  var CACHE_NAME = CACHE_PREFIX + ':' + CACHE_TAG;\n\n  var STORED_DATA_KEY = '__offline_webpack__data';\n\n  mapAssets();\n\n  var allAssets = [].concat(assets.main, assets.additional, assets.optional);\n  var navigateFallbackURL = params.navigateFallbackURL;\n\n  self.addEventListener('install', function (event) {\n    console.log('[SW]:', 'Install event');\n\n    var installing = undefined;\n\n    if (strategy === 'changed') {\n      installing = cacheChanged('main');\n    } else {\n      installing = cacheAssets('main');\n    }\n\n    event.waitUntil(installing);\n  });\n\n  self.addEventListener('activate', function (event) {\n    console.log('[SW]:', 'Activate event');\n\n    var activation = cacheAdditional();\n\n    // Delete all assets which name starts with CACHE_PREFIX and\n    // is not current cache (CACHE_NAME)\n    activation = activation.then(storeCacheData);\n    activation = activation.then(deleteObsolete);\n    activation = activation.then(function () {\n      if (self.clients && self.clients.claim) {\n        return self.clients.claim();\n      }\n    });\n\n    event.waitUntil(activation);\n  });\n\n  function cacheAdditional() {\n    if (!assets.additional.length) {\n      return Promise.resolve();\n    }\n\n    if (false) {\n      console.log('[SW]:', 'Caching additional');\n    }\n\n    var operation = undefined;\n\n    if (strategy === 'changed') {\n      operation = cacheChanged('additional');\n    } else {\n      operation = cacheAssets('additional');\n    }\n\n    // Ignore fail of `additional` cache section\n    return operation['catch'](function (e) {\n      console.error('[SW]:', 'Cache section `additional` failed to load');\n    });\n  }\n\n  function cacheAssets(section) {\n    var batch = assets[section];\n\n    return caches.open(CACHE_NAME).then(function (cache) {\n      return addAllNormalized(cache, batch, {\n        bust: params.version\n      });\n    }).then(function () {\n      logGroup('Cached assets: ' + section, batch);\n    })['catch'](function (e) {\n      console.error(e);\n      throw e;\n    });\n  }\n\n  function cacheChanged(section) {\n    return getLastCache().then(function (args) {\n      if (!args) {\n        return cacheAssets(section);\n      }\n\n      var lastCache = args[0];\n      var lastKeys = args[1];\n      var lastData = args[2];\n\n      var lastMap = lastData.hashmap;\n      var lastVersion = lastData.version;\n\n      if (!lastData.hashmap || lastVersion === params.version) {\n        return cacheAssets(section);\n      }\n\n      var lastHashedAssets = Object.keys(lastMap).map(function (hash) {\n        return lastMap[hash];\n      });\n\n      var lastUrls = lastKeys.map(function (req) {\n        var url = new URL(req.url);\n        url.search = '';\n\n        return url.toString();\n      });\n\n      var sectionAssets = assets[section];\n      var moved = [];\n      var changed = sectionAssets.filter(function (url) {\n        if (lastUrls.indexOf(url) === -1 || lastHashedAssets.indexOf(url) === -1) {\n          return true;\n        }\n\n        return false;\n      });\n\n      Object.keys(hashesMap).forEach(function (hash) {\n        var asset = hashesMap[hash];\n\n        // Return if not in sectionAssets or in changed or moved array\n        if (sectionAssets.indexOf(asset) === -1 || changed.indexOf(asset) !== -1 || moved.indexOf(asset) !== -1) return;\n\n        var lastAsset = lastMap[hash];\n\n        if (lastAsset && lastUrls.indexOf(lastAsset) !== -1) {\n          moved.push([lastAsset, asset]);\n        } else {\n          changed.push(asset);\n        }\n      });\n\n      logGroup('Changed assets: ' + section, changed);\n      logGroup('Moved assets: ' + section, moved);\n\n      var movedResponses = Promise.all(moved.map(function (pair) {\n        return lastCache.match(pair[0]).then(function (response) {\n          return [pair[1], response];\n        });\n      }));\n\n      return caches.open(CACHE_NAME).then(function (cache) {\n        var move = movedResponses.then(function (responses) {\n          return Promise.all(responses.map(function (pair) {\n            return cache.put(pair[0], pair[1]);\n          }));\n        });\n\n        return Promise.all([move, addAllNormalized(cache, changed, {\n          bust: params.version\n        })]);\n      });\n    });\n  }\n\n  function deleteObsolete() {\n    return caches.keys().then(function (keys) {\n      var all = keys.map(function (key) {\n        if (key.indexOf(CACHE_PREFIX) !== 0 || key.indexOf(CACHE_NAME) === 0) return;\n\n        console.log('[SW]:', 'Delete cache:', key);\n        return caches['delete'](key);\n      });\n\n      return Promise.all(all);\n    });\n  }\n\n  function getLastCache() {\n    return caches.keys().then(function (keys) {\n      var index = keys.length;\n      var key = undefined;\n\n      while (index--) {\n        key = keys[index];\n\n        if (key.indexOf(CACHE_PREFIX) === 0) {\n          break;\n        }\n      }\n\n      if (!key) return;\n\n      var cache = undefined;\n\n      return caches.open(key).then(function (_cache) {\n        cache = _cache;\n        return _cache.match(new URL(STORED_DATA_KEY, location).toString());\n      }).then(function (response) {\n        if (!response) return;\n\n        return Promise.all([cache, cache.keys(), response.json()]);\n      });\n    });\n  }\n\n  function storeCacheData() {\n    return caches.open(CACHE_NAME).then(function (cache) {\n      var data = new Response(JSON.stringify({\n        version: params.version,\n        hashmap: hashesMap\n      }));\n\n      return cache.put(new URL(STORED_DATA_KEY, location).toString(), data);\n    });\n  }\n\n  self.addEventListener('fetch', function (event) {\n    var url = new URL(event.request.url);\n    url.search = '';\n    var urlString = url.toString();\n\n    // Match only GET and known caches, otherwise just ignore request\n    if (event.request.method !== 'GET' || allAssets.indexOf(urlString) === -1) {\n      if (navigateFallbackURL && isNavigateRequest(event.request)) {\n        event.respondWith(handleNavigateFallback(fetch(event.request)));\n\n        return;\n      }\n\n      // Fix for https://twitter.com/wanderview/status/696819243262873600\n      if (url.origin !== location.origin && navigator.userAgent.indexOf('Firefox/44.') !== -1) {\n        event.respondWith(fetch(event.request));\n      }\n\n      return;\n    }\n\n    var resource = cachesMatch(urlString, CACHE_NAME).then(function (response) {\n      if (response) {\n        if (false) {\n          console.log('[SW]:', 'URL [' + urlString + '] from cache');\n        }\n\n        return response;\n      }\n\n      // Load and cache known assets\n      var fetching = fetch(event.request).then(function (response) {\n        if (!response || !response.ok) {\n          if (false) {\n            console.log('[SW]:', 'URL [' + urlString + '] wrong response: [' + response.status + '] ' + response.type);\n          }\n\n          return response;\n        }\n\n        if (false) {\n          console.log('[SW]:', 'URL [' + urlString + '] fetched');\n        }\n\n        var responseClone = response.clone();\n\n        caches.open(CACHE_NAME).then(function (cache) {\n          return cache.put(urlString, responseClone);\n        }).then(function () {\n          console.log('[SW]:', 'Cache asset: ' + urlString);\n        });\n\n        return response;\n      });\n\n      if (navigateFallbackURL && isNavigateRequest(event.request)) {\n        return handleNavigateFallback(fetching);\n      }\n\n      return fetching;\n    });\n\n    event.respondWith(resource);\n  });\n\n  self.addEventListener('message', function (e) {\n    var data = e.data;\n    if (!data) return;\n\n    switch (data.action) {\n      case 'skipWaiting':\n        {\n          if (self.skipWaiting) self.skipWaiting();\n        }break;\n    }\n  });\n\n  function handleNavigateFallback(fetching) {\n    return fetching['catch'](function () {}).then(function (response) {\n      if (!response || !response.ok) {\n        if (false) {\n          console.log('[SW]:', 'Loading navigation fallback [' + navigateFallbackURL + '] from cache');\n        }\n\n        return cachesMatch(navigateFallbackURL, CACHE_NAME);\n      }\n\n      return response;\n    });\n  }\n\n  function mapAssets() {\n    Object.keys(assets).forEach(function (key) {\n      assets[key] = assets[key].map(function (path) {\n        var url = new URL(path, location);\n        url.search = '';\n\n        return url.toString();\n      });\n    });\n\n    hashesMap = Object.keys(hashesMap).reduce(function (result, hash) {\n      var url = new URL(hashesMap[hash], location);\n      url.search = '';\n\n      result[hash] = url.toString();\n      return result;\n    }, {});\n  }\n}\n\nfunction addAllNormalized(cache, requests, options) {\n  var bustValue = options && options.bust;\n\n  return Promise.all(requests.map(function (request) {\n    if (bustValue) {\n      request = applyCacheBust(request, bustValue);\n    }\n\n    return fetch(request);\n  })).then(function (responses) {\n    if (responses.some(function (response) {\n      return !response.ok;\n    })) {\n      return Promise.reject(new Error('Wrong response status'));\n    }\n\n    var addAll = responses.map(function (response, i) {\n      return cache.put(requests[i], response);\n    });\n\n    return Promise.all(addAll);\n  });\n}\n\nfunction cachesMatch(request, cacheName) {\n  return caches.match(request, {\n    cacheName: cacheName\n  })\n  // Return void if error happened (cache not found)\n  ['catch'](function () {});\n}\n\nfunction applyCacheBust(asset, key) {\n  var hasQuery = asset.indexOf('?') !== -1;\n  return asset + (hasQuery ? '&' : '?') + '__uncache=' + encodeURIComponent(key);\n}\n\nfunction getClientsURLs() {\n  if (!self.clients) {\n    return Promise.resolve([]);\n  }\n\n  return self.clients.matchAll({\n    includeUncontrolled: true\n  }).then(function (clients) {\n    if (!clients.length) return [];\n\n    var result = [];\n\n    clients.forEach(function (client) {\n      var url = new URL(client.url);\n      url.search = '';\n      url.hash = '';\n      var urlString = url.toString();\n\n      if (!result.length || result.indexOf(urlString) === -1) {\n        result.push(urlString);\n      }\n    });\n\n    return result;\n  });\n}\n\nfunction isNavigateRequest(request) {\n  return request.mode === 'navigate' || request.headers.get('Upgrade-Insecure-Requests') || (request.headers.get('Accept') || '').indexOf('text/html') !== -1;\n}\n\nfunction logGroup(title, assets) {\n  console.groupCollapsed('[SW]:', title);\n\n  assets.forEach(function (asset) {\n    console.log('Asset:', asset);\n  });\n\n  console.groupEnd();\n}\n      __webpack_require__(2)\n      WebpackServiceWorker(__wpo);\n      module.exports = __webpack_require__(1)\n    //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L29mZmxpbmUtcGx1Z2luL2VtcHR5LWVudHJ5LmpzPzQzYTciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUzs7QUFFVDtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTOztBQUVUO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAndXNlIHN0cmljdCc7XG5cbmlmICh0eXBlb2YgREVCVUcgPT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBERUJVRyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBXZWJwYWNrU2VydmljZVdvcmtlcihwYXJhbXMpIHtcbiAgdmFyIHN0cmF0ZWd5ID0gcGFyYW1zLnN0cmF0ZWd5O1xuICB2YXIgYXNzZXRzID0gcGFyYW1zLmFzc2V0cztcbiAgdmFyIGhhc2hlc01hcCA9IHBhcmFtcy5oYXNoZXNNYXA7XG5cbiAgLy8gTm90IHVzZWQgeWV0XG4gIC8vIGNvbnN0IGFsd2F5c1JldmFsaWRhdGUgPSBwYXJhbXMuYWx3YXlzUmV2YWxpZGF0ZTtcbiAgLy8gY29uc3QgaWdub3JlU2VhcmNoID0gcGFyYW1zLmlnbm9yZVNlYXJjaDtcbiAgLy8gY29uc3QgcHJlZmVyT25saW5lID0gcGFyYW1zLnByZWZlck9ubGluZTtcblxuICB2YXIgdGFnTWFwID0ge1xuICAgIGFsbDogcGFyYW1zLnZlcnNpb24sXG4gICAgY2hhbmdlZDogcGFyYW1zLnZlcnNpb25cbiAgfTtcblxuICB2YXIgQ0FDSEVfUFJFRklYID0gcGFyYW1zLm5hbWU7XG4gIHZhciBDQUNIRV9UQUcgPSB0YWdNYXBbc3RyYXRlZ3ldO1xuICB2YXIgQ0FDSEVfTkFNRSA9IENBQ0hFX1BSRUZJWCArICc6JyArIENBQ0hFX1RBRztcblxuICB2YXIgU1RPUkVEX0RBVEFfS0VZID0gJ19fb2ZmbGluZV93ZWJwYWNrX19kYXRhJztcblxuICBtYXBBc3NldHMoKTtcblxuICB2YXIgYWxsQXNzZXRzID0gW10uY29uY2F0KGFzc2V0cy5tYWluLCBhc3NldHMuYWRkaXRpb25hbCwgYXNzZXRzLm9wdGlvbmFsKTtcbiAgdmFyIG5hdmlnYXRlRmFsbGJhY2tVUkwgPSBwYXJhbXMubmF2aWdhdGVGYWxsYmFja1VSTDtcblxuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnSW5zdGFsbCBldmVudCcpO1xuXG4gICAgdmFyIGluc3RhbGxpbmcgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc3RyYXRlZ3kgPT09ICdjaGFuZ2VkJykge1xuICAgICAgaW5zdGFsbGluZyA9IGNhY2hlQ2hhbmdlZCgnbWFpbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YWxsaW5nID0gY2FjaGVBc3NldHMoJ21haW4nKTtcbiAgICB9XG5cbiAgICBldmVudC53YWl0VW50aWwoaW5zdGFsbGluZyk7XG4gIH0pO1xuXG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnQWN0aXZhdGUgZXZlbnQnKTtcblxuICAgIHZhciBhY3RpdmF0aW9uID0gY2FjaGVBZGRpdGlvbmFsKCk7XG5cbiAgICAvLyBEZWxldGUgYWxsIGFzc2V0cyB3aGljaCBuYW1lIHN0YXJ0cyB3aXRoIENBQ0hFX1BSRUZJWCBhbmRcbiAgICAvLyBpcyBub3QgY3VycmVudCBjYWNoZSAoQ0FDSEVfTkFNRSlcbiAgICBhY3RpdmF0aW9uID0gYWN0aXZhdGlvbi50aGVuKHN0b3JlQ2FjaGVEYXRhKTtcbiAgICBhY3RpdmF0aW9uID0gYWN0aXZhdGlvbi50aGVuKGRlbGV0ZU9ic29sZXRlKTtcbiAgICBhY3RpdmF0aW9uID0gYWN0aXZhdGlvbi50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLmNsaWVudHMgJiYgc2VsZi5jbGllbnRzLmNsYWltKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmNsaWVudHMuY2xhaW0oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGV2ZW50LndhaXRVbnRpbChhY3RpdmF0aW9uKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gY2FjaGVBZGRpdGlvbmFsKCkge1xuICAgIGlmICghYXNzZXRzLmFkZGl0aW9uYWwubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnQ2FjaGluZyBhZGRpdGlvbmFsJyk7XG4gICAgfVxuXG4gICAgdmFyIG9wZXJhdGlvbiA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChzdHJhdGVneSA9PT0gJ2NoYW5nZWQnKSB7XG4gICAgICBvcGVyYXRpb24gPSBjYWNoZUNoYW5nZWQoJ2FkZGl0aW9uYWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3BlcmF0aW9uID0gY2FjaGVBc3NldHMoJ2FkZGl0aW9uYWwnKTtcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgZmFpbCBvZiBgYWRkaXRpb25hbGAgY2FjaGUgc2VjdGlvblxuICAgIHJldHVybiBvcGVyYXRpb25bJ2NhdGNoJ10oZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTV106JywgJ0NhY2hlIHNlY3Rpb24gYGFkZGl0aW9uYWxgIGZhaWxlZCB0byBsb2FkJyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZUFzc2V0cyhzZWN0aW9uKSB7XG4gICAgdmFyIGJhdGNoID0gYXNzZXRzW3NlY3Rpb25dO1xuXG4gICAgcmV0dXJuIGNhY2hlcy5vcGVuKENBQ0hFX05BTUUpLnRoZW4oZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICByZXR1cm4gYWRkQWxsTm9ybWFsaXplZChjYWNoZSwgYmF0Y2gsIHtcbiAgICAgICAgYnVzdDogcGFyYW1zLnZlcnNpb25cbiAgICAgIH0pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgbG9nR3JvdXAoJ0NhY2hlZCBhc3NldHM6ICcgKyBzZWN0aW9uLCBiYXRjaCk7XG4gICAgfSlbJ2NhdGNoJ10oZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FjaGVDaGFuZ2VkKHNlY3Rpb24pIHtcbiAgICByZXR1cm4gZ2V0TGFzdENhY2hlKCkudGhlbihmdW5jdGlvbiAoYXJncykge1xuICAgICAgaWYgKCFhcmdzKSB7XG4gICAgICAgIHJldHVybiBjYWNoZUFzc2V0cyhzZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhc3RDYWNoZSA9IGFyZ3NbMF07XG4gICAgICB2YXIgbGFzdEtleXMgPSBhcmdzWzFdO1xuICAgICAgdmFyIGxhc3REYXRhID0gYXJnc1syXTtcblxuICAgICAgdmFyIGxhc3RNYXAgPSBsYXN0RGF0YS5oYXNobWFwO1xuICAgICAgdmFyIGxhc3RWZXJzaW9uID0gbGFzdERhdGEudmVyc2lvbjtcblxuICAgICAgaWYgKCFsYXN0RGF0YS5oYXNobWFwIHx8IGxhc3RWZXJzaW9uID09PSBwYXJhbXMudmVyc2lvbikge1xuICAgICAgICByZXR1cm4gY2FjaGVBc3NldHMoc2VjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0SGFzaGVkQXNzZXRzID0gT2JqZWN0LmtleXMobGFzdE1hcCkubWFwKGZ1bmN0aW9uIChoYXNoKSB7XG4gICAgICAgIHJldHVybiBsYXN0TWFwW2hhc2hdO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBsYXN0VXJscyA9IGxhc3RLZXlzLm1hcChmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgICB1cmwuc2VhcmNoID0gJyc7XG5cbiAgICAgICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBzZWN0aW9uQXNzZXRzID0gYXNzZXRzW3NlY3Rpb25dO1xuICAgICAgdmFyIG1vdmVkID0gW107XG4gICAgICB2YXIgY2hhbmdlZCA9IHNlY3Rpb25Bc3NldHMuZmlsdGVyKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKGxhc3RVcmxzLmluZGV4T2YodXJsKSA9PT0gLTEgfHwgbGFzdEhhc2hlZEFzc2V0cy5pbmRleE9mKHVybCkgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgT2JqZWN0LmtleXMoaGFzaGVzTWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChoYXNoKSB7XG4gICAgICAgIHZhciBhc3NldCA9IGhhc2hlc01hcFtoYXNoXTtcblxuICAgICAgICAvLyBSZXR1cm4gaWYgbm90IGluIHNlY3Rpb25Bc3NldHMgb3IgaW4gY2hhbmdlZCBvciBtb3ZlZCBhcnJheVxuICAgICAgICBpZiAoc2VjdGlvbkFzc2V0cy5pbmRleE9mKGFzc2V0KSA9PT0gLTEgfHwgY2hhbmdlZC5pbmRleE9mKGFzc2V0KSAhPT0gLTEgfHwgbW92ZWQuaW5kZXhPZihhc3NldCkgIT09IC0xKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxhc3RBc3NldCA9IGxhc3RNYXBbaGFzaF07XG5cbiAgICAgICAgaWYgKGxhc3RBc3NldCAmJiBsYXN0VXJscy5pbmRleE9mKGxhc3RBc3NldCkgIT09IC0xKSB7XG4gICAgICAgICAgbW92ZWQucHVzaChbbGFzdEFzc2V0LCBhc3NldF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZWQucHVzaChhc3NldCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dHcm91cCgnQ2hhbmdlZCBhc3NldHM6ICcgKyBzZWN0aW9uLCBjaGFuZ2VkKTtcbiAgICAgIGxvZ0dyb3VwKCdNb3ZlZCBhc3NldHM6ICcgKyBzZWN0aW9uLCBtb3ZlZCk7XG5cbiAgICAgIHZhciBtb3ZlZFJlc3BvbnNlcyA9IFByb21pc2UuYWxsKG1vdmVkLm1hcChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICByZXR1cm4gbGFzdENhY2hlLm1hdGNoKHBhaXJbMF0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIFtwYWlyWzFdLCByZXNwb25zZV07XG4gICAgICAgIH0pO1xuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgdmFyIG1vdmUgPSBtb3ZlZFJlc3BvbnNlcy50aGVuKGZ1bmN0aW9uIChyZXNwb25zZXMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzcG9uc2VzLm1hcChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnB1dChwYWlyWzBdLCBwYWlyWzFdKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbbW92ZSwgYWRkQWxsTm9ybWFsaXplZChjYWNoZSwgY2hhbmdlZCwge1xuICAgICAgICAgIGJ1c3Q6IHBhcmFtcy52ZXJzaW9uXG4gICAgICAgIH0pXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZU9ic29sZXRlKCkge1xuICAgIHJldHVybiBjYWNoZXMua2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgIHZhciBhbGwgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmIChrZXkuaW5kZXhPZihDQUNIRV9QUkVGSVgpICE9PSAwIHx8IGtleS5pbmRleE9mKENBQ0hFX05BTUUpID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tTV106JywgJ0RlbGV0ZSBjYWNoZTonLCBrZXkpO1xuICAgICAgICByZXR1cm4gY2FjaGVzWydkZWxldGUnXShrZXkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChhbGwpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TGFzdENhY2hlKCkge1xuICAgIHJldHVybiBjYWNoZXMua2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgIHZhciBpbmRleCA9IGtleXMubGVuZ3RoO1xuICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcblxuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpbmRleF07XG5cbiAgICAgICAgaWYgKGtleS5pbmRleE9mKENBQ0hFX1BSRUZJWCkgPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWtleSkgcmV0dXJuO1xuXG4gICAgICB2YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHJldHVybiBjYWNoZXMub3BlbihrZXkpLnRoZW4oZnVuY3Rpb24gKF9jYWNoZSkge1xuICAgICAgICBjYWNoZSA9IF9jYWNoZTtcbiAgICAgICAgcmV0dXJuIF9jYWNoZS5tYXRjaChuZXcgVVJMKFNUT1JFRF9EQVRBX0tFWSwgbG9jYXRpb24pLnRvU3RyaW5nKCkpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkgcmV0dXJuO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbY2FjaGUsIGNhY2hlLmtleXMoKSwgcmVzcG9uc2UuanNvbigpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3JlQ2FjaGVEYXRhKCkge1xuICAgIHJldHVybiBjYWNoZXMub3BlbihDQUNIRV9OQU1FKS50aGVuKGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgdmFyIGRhdGEgPSBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB2ZXJzaW9uOiBwYXJhbXMudmVyc2lvbixcbiAgICAgICAgaGFzaG1hcDogaGFzaGVzTWFwXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBjYWNoZS5wdXQobmV3IFVSTChTVE9SRURfREFUQV9LRVksIGxvY2F0aW9uKS50b1N0cmluZygpLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdXJsID0gbmV3IFVSTChldmVudC5yZXF1ZXN0LnVybCk7XG4gICAgdXJsLnNlYXJjaCA9ICcnO1xuICAgIHZhciB1cmxTdHJpbmcgPSB1cmwudG9TdHJpbmcoKTtcblxuICAgIC8vIE1hdGNoIG9ubHkgR0VUIGFuZCBrbm93biBjYWNoZXMsIG90aGVyd2lzZSBqdXN0IGlnbm9yZSByZXF1ZXN0XG4gICAgaWYgKGV2ZW50LnJlcXVlc3QubWV0aG9kICE9PSAnR0VUJyB8fCBhbGxBc3NldHMuaW5kZXhPZih1cmxTdHJpbmcpID09PSAtMSkge1xuICAgICAgaWYgKG5hdmlnYXRlRmFsbGJhY2tVUkwgJiYgaXNOYXZpZ2F0ZVJlcXVlc3QoZXZlbnQucmVxdWVzdCkpIHtcbiAgICAgICAgZXZlbnQucmVzcG9uZFdpdGgoaGFuZGxlTmF2aWdhdGVGYWxsYmFjayhmZXRjaChldmVudC5yZXF1ZXN0KSkpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRml4IGZvciBodHRwczovL3R3aXR0ZXIuY29tL3dhbmRlcnZpZXcvc3RhdHVzLzY5NjgxOTI0MzI2Mjg3MzYwMFxuICAgICAgaWYgKHVybC5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbiAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gvNDQuJykgIT09IC0xKSB7XG4gICAgICAgIGV2ZW50LnJlc3BvbmRXaXRoKGZldGNoKGV2ZW50LnJlcXVlc3QpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZXNvdXJjZSA9IGNhY2hlc01hdGNoKHVybFN0cmluZywgQ0FDSEVfTkFNRSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnVVJMIFsnICsgdXJsU3RyaW5nICsgJ10gZnJvbSBjYWNoZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIGFuZCBjYWNoZSBrbm93biBhc3NldHNcbiAgICAgIHZhciBmZXRjaGluZyA9IGZldGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnVVJMIFsnICsgdXJsU3RyaW5nICsgJ10gd3JvbmcgcmVzcG9uc2U6IFsnICsgcmVzcG9uc2Uuc3RhdHVzICsgJ10gJyArIHJlc3BvbnNlLnR5cGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdVUkwgWycgKyB1cmxTdHJpbmcgKyAnXSBmZXRjaGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzcG9uc2VDbG9uZSA9IHJlc3BvbnNlLmNsb25lKCk7XG5cbiAgICAgICAgY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGUucHV0KHVybFN0cmluZywgcmVzcG9uc2VDbG9uZSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdDYWNoZSBhc3NldDogJyArIHVybFN0cmluZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobmF2aWdhdGVGYWxsYmFja1VSTCAmJiBpc05hdmlnYXRlUmVxdWVzdChldmVudC5yZXF1ZXN0KSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlTmF2aWdhdGVGYWxsYmFjayhmZXRjaGluZyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmZXRjaGluZztcbiAgICB9KTtcblxuICAgIGV2ZW50LnJlc3BvbmRXaXRoKHJlc291cmNlKTtcbiAgfSk7XG5cbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgZGF0YSA9IGUuZGF0YTtcbiAgICBpZiAoIWRhdGEpIHJldHVybjtcblxuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3NraXBXYWl0aW5nJzpcbiAgICAgICAge1xuICAgICAgICAgIGlmIChzZWxmLnNraXBXYWl0aW5nKSBzZWxmLnNraXBXYWl0aW5nKCk7XG4gICAgICAgIH1icmVhaztcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU5hdmlnYXRlRmFsbGJhY2soZmV0Y2hpbmcpIHtcbiAgICByZXR1cm4gZmV0Y2hpbmdbJ2NhdGNoJ10oZnVuY3Rpb24gKCkge30pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5vaykge1xuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnTG9hZGluZyBuYXZpZ2F0aW9uIGZhbGxiYWNrIFsnICsgbmF2aWdhdGVGYWxsYmFja1VSTCArICddIGZyb20gY2FjaGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZXNNYXRjaChuYXZpZ2F0ZUZhbGxiYWNrVVJMLCBDQUNIRV9OQU1FKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFwQXNzZXRzKCkge1xuICAgIE9iamVjdC5rZXlzKGFzc2V0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBhc3NldHNba2V5XSA9IGFzc2V0c1trZXldLm1hcChmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICB2YXIgdXJsID0gbmV3IFVSTChwYXRoLCBsb2NhdGlvbik7XG4gICAgICAgIHVybC5zZWFyY2ggPSAnJztcblxuICAgICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGhhc2hlc01hcCA9IE9iamVjdC5rZXlzKGhhc2hlc01hcCkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGhhc2gpIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKGhhc2hlc01hcFtoYXNoXSwgbG9jYXRpb24pO1xuICAgICAgdXJsLnNlYXJjaCA9ICcnO1xuXG4gICAgICByZXN1bHRbaGFzaF0gPSB1cmwudG9TdHJpbmcoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZEFsbE5vcm1hbGl6ZWQoY2FjaGUsIHJlcXVlc3RzLCBvcHRpb25zKSB7XG4gIHZhciBidXN0VmFsdWUgPSBvcHRpb25zICYmIG9wdGlvbnMuYnVzdDtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwocmVxdWVzdHMubWFwKGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgaWYgKGJ1c3RWYWx1ZSkge1xuICAgICAgcmVxdWVzdCA9IGFwcGx5Q2FjaGVCdXN0KHJlcXVlc3QsIGJ1c3RWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZldGNoKHJlcXVlc3QpO1xuICB9KSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2VzKSB7XG4gICAgaWYgKHJlc3BvbnNlcy5zb21lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuICFyZXNwb25zZS5vaztcbiAgICB9KSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV3JvbmcgcmVzcG9uc2Ugc3RhdHVzJykpO1xuICAgIH1cblxuICAgIHZhciBhZGRBbGwgPSByZXNwb25zZXMubWFwKGZ1bmN0aW9uIChyZXNwb25zZSwgaSkge1xuICAgICAgcmV0dXJuIGNhY2hlLnB1dChyZXF1ZXN0c1tpXSwgcmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGFkZEFsbCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjYWNoZXNNYXRjaChyZXF1ZXN0LCBjYWNoZU5hbWUpIHtcbiAgcmV0dXJuIGNhY2hlcy5tYXRjaChyZXF1ZXN0LCB7XG4gICAgY2FjaGVOYW1lOiBjYWNoZU5hbWVcbiAgfSlcbiAgLy8gUmV0dXJuIHZvaWQgaWYgZXJyb3IgaGFwcGVuZWQgKGNhY2hlIG5vdCBmb3VuZClcbiAgWydjYXRjaCddKGZ1bmN0aW9uICgpIHt9KTtcbn1cblxuZnVuY3Rpb24gYXBwbHlDYWNoZUJ1c3QoYXNzZXQsIGtleSkge1xuICB2YXIgaGFzUXVlcnkgPSBhc3NldC5pbmRleE9mKCc/JykgIT09IC0xO1xuICByZXR1cm4gYXNzZXQgKyAoaGFzUXVlcnkgPyAnJicgOiAnPycpICsgJ19fdW5jYWNoZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudHNVUkxzKCkge1xuICBpZiAoIXNlbGYuY2xpZW50cykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG5cbiAgcmV0dXJuIHNlbGYuY2xpZW50cy5tYXRjaEFsbCh7XG4gICAgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZVxuICB9KS50aGVuKGZ1bmN0aW9uIChjbGllbnRzKSB7XG4gICAgaWYgKCFjbGllbnRzLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgY2xpZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKGNsaWVudC51cmwpO1xuICAgICAgdXJsLnNlYXJjaCA9ICcnO1xuICAgICAgdXJsLmhhc2ggPSAnJztcbiAgICAgIHZhciB1cmxTdHJpbmcgPSB1cmwudG9TdHJpbmcoKTtcblxuICAgICAgaWYgKCFyZXN1bHQubGVuZ3RoIHx8IHJlc3VsdC5pbmRleE9mKHVybFN0cmluZykgPT09IC0xKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHVybFN0cmluZyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNOYXZpZ2F0ZVJlcXVlc3QocmVxdWVzdCkge1xuICByZXR1cm4gcmVxdWVzdC5tb2RlID09PSAnbmF2aWdhdGUnIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnKSB8fCAocmVxdWVzdC5oZWFkZXJzLmdldCgnQWNjZXB0JykgfHwgJycpLmluZGV4T2YoJ3RleHQvaHRtbCcpICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gbG9nR3JvdXAodGl0bGUsIGFzc2V0cykge1xuICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKCdbU1ddOicsIHRpdGxlKTtcblxuICBhc3NldHMuZm9yRWFjaChmdW5jdGlvbiAoYXNzZXQpIHtcbiAgICBjb25zb2xlLmxvZygnQXNzZXQ6JywgYXNzZXQpO1xuICB9KTtcblxuICBjb25zb2xlLmdyb3VwRW5kKCk7XG59XG4gICAgICByZXF1aXJlKFwiISEuL2xpYi9taXNjL3N3LXBvbHlmaWxsLmpzXCIpXG4gICAgICBXZWJwYWNrU2VydmljZVdvcmtlcihfX3dwbyk7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2VtcHR5LWVudHJ5LmpzXCIpXG4gICAgXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vb2ZmbGluZS1wbHVnaW4vbGliL21pc2Mvc3ctbG9hZGVyLmpzP3tcImRhdGFfdmFyX25hbWVcIjpcIl9fd3BvXCJ9IS4vfi9vZmZsaW5lLXBsdWdpbi9lbXB0eS1lbnRyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOltdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval('"use strict";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L29mZmxpbmUtcGx1Z2luL2xpYi9taXNjL3N3LXBvbHlmaWxsLmpzPzRjZTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L29mZmxpbmUtcGx1Z2luL2xpYi9taXNjL3N3LXBvbHlmaWxsLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')}]);